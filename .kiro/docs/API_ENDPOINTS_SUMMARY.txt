KAYTOP FRONTEND API ENDPOINTS MAPPING
=====================================

BASE URL: https://kaytop-production.up.railway.app

=== AUTHENTICATION ENDPOINTS ===
POST /auth/login - User login
POST /auth/signup - User registration
POST /auth/forgot-password - Initiate password reset
POST /auth/reset-password - Complete password reset
POST /auth/change-password - Change user password
GET /auth/profile - Get authenticated user profile

=== USER MANAGEMENT ENDPOINTS ===
GET /admin/users - Get all users (paginated)
GET /admin/users/{id} - Get user by ID
GET /admin/user/{email} - Get user by email
PATCH /admin/users/{id} - Update user
DELETE /admin/users/{id} - Delete user
PATCH /admin/users/{id}/update-role - Update user role
PATCH /admin/users/{id}/profile-picture - Upload profile picture
GET /admin/users/branch/{branch} - Get users by branch
GET /admin/users/state/{state} - Get users by state
GET /users/filter - Filter users by role/branch/state
GET /users/profile - Get current user profile
PATCH /users/me - Update current user profile
PATCH /users/me/profile-picture - Update current user profile picture
GET /users/my-branch - Get users in current user's branch
GET /users/states - Get available states
GET /users/branches - Get available branches

=== STAFF MANAGEMENT ENDPOINTS ===
POST /admin/staff/create - Create new staff member
GET /admin/staff/my-staff - Get staff managed by current user

=== LOAN MANAGEMENT ENDPOINTS ===
GET /loans/all - Get all loans (paginated)
GET /loans/{id} - Get loan by ID
GET /loans/customer/{customerId} - Get customer's loans
GET /loans/disbursed - Get disbursed loans (paginated)
GET /loans/recollections - Get loan recollections (paginated)
GET /loans/missed - Get missed payment loans (paginated)
GET /loans/disbursed/volume - Get disbursement volume data
POST /loans/customer/{customerId} - Create new loan for customer
POST /loans/{loanId}/disburse - Disburse a loan
GET /loans/{loanId}/repayments - Get loan repayments
POST /loans/{loanId}/repayments - Record loan repayment
GET /loans/customer/{customerId}/loan-summary - Get customer loan summary
GET /loans/customer/{customerId}/disbursement-summary - Get disbursement summary
POST /loans/{id}/approve - Approve loan
POST /loans/{id}/decline - Decline loan
PUT /loans/{id}/stage - Update loan stage

=== CUSTOMER LOAN ENDPOINTS ===
GET /customer/loans/my-loans - Get customer's own loans
GET /customer/loans/active-loan - Get customer's active loan

=== SAVINGS MANAGEMENT ENDPOINTS ===
GET /savings/all - Get all savings accounts (paginated)
GET /savings/customer/{customerId} - Get customer's savings account
GET /savings/transactions/all - Get all savings transactions (paginated)
POST /savings/customer/{customerId}/deposit - Record deposit
POST /savings/customer/{customerId}/withdraw - Record withdrawal
POST /savings/customer/{customerId}/loan-coverage - Use savings for loan coverage
POST /savings/transactions/{transactionId}/approve-withdraw - Approve withdrawal
POST /savings/transactions/{transactionId}/approve-loan-coverage - Approve loan coverage

=== CUSTOMER SAVINGS ENDPOINTS ===
GET /customer/savings/my-balance - Get customer's savings balance
GET /customer/savings/my-transactions - Get customer's savings transactions

=== DASHBOARD ENDPOINTS ===
GET /dashboard/kpi - Get dashboard KPIs (with optional filters)
  Query params: timeFilter, startDate, endDate, branch

=== OTP ENDPOINTS ===
POST /otp/send - Send OTP
POST /otp/verify - Verify OTP

=== REPORTS ENDPOINTS ===
GET /reports - Get all reports (paginated)
GET /reports/{id} - Get report by ID
POST /reports/{id}/approve - Approve report
POST /reports/{id}/decline - Decline report
GET /reports/statistics - Get report statistics

=== ACTIVITY LOGS ENDPOINTS ===
GET /admin/activity-logs - Get activity logs (paginated)
GET /admin/activity-logs/user/{userId} - Get user's activity logs

=== SYSTEM SETTINGS ENDPOINTS ===
GET /admin/system-settings - Get system settings
PUT /admin/system-settings - Update system settings

=== EXPORT ENDPOINTS ===
GET /admin/users/export - Export users
GET /admin/exports/history - Get export history

=== FRONTEND PAGES USING THESE ENDPOINTS ===

Dashboard Pages:
- /dashboard/am - Account Manager Dashboard (uses: /dashboard/kpi, /loans/disbursed, /loans/recollections, /savings/all, /loans/missed)
- /dashboard/system-admin - System Admin Dashboard (uses: /dashboard/kpi, /loans/disbursed, /loans/recollections, /savings/all, /loans/missed)
- /dashboard/system-admin/customers - Customers List (uses: /admin/users, /dashboard/kpi)
- /dashboard/system-admin/credit-officers - Credit Officers List (uses: /admin/users, /dashboard/kpi)
- /dashboard/am/customers/[id]/loans - Customer Loans Detail (uses: /loans/customer/{id}, /admin/users/{id})
- /dashboard/bm - Branch Manager Dashboard (uses: /dashboard/kpi, /loans, /savings/all)

Authentication Pages:
- /auth/bm/login - Login (uses: /auth/login, /otp/send, /otp/verify)
- /auth/bm/forgot-password - Forgot Password (uses: /auth/forgot-password)
- /auth/bm/reset-password - Reset Password (uses: /auth/reset-password)

=== API CLIENT CONFIGURATION ===
Base URL: process.env.NEXT_PUBLIC_KAYTOP_API_BASE_URL || 'https://kaytop-production.up.railway.app'
Timeout: 30 seconds (configurable)
Retry Attempts: 3 (configurable)
Authentication: Bearer token in Authorization header
Data Transformation: Automatic response transformation based on endpoint

=== AUTHENTICATION REQUIREMENTS ===
All endpoints except /auth/login, /auth/signup, /auth/forgot-password, /auth/reset-password, /otp/send, /otp/verify require:
- Authorization: Bearer {token}
- Token stored in localStorage as auth_session

=== DATA TRANSFORMATION ===
The frontend uses DataTransformers to normalize backend responses:
- transformUser() - Normalizes user data
- transformLoan() - Normalizes loan data
- transformSavingsAccount() - Normalizes savings data
- transformTransaction() - Normalizes transaction data
- transformDashboardKPIs() - Normalizes dashboard KPI data
- transformPaginatedResponse() - Handles paginated responses

=== QUERY PARAMETERS ===
Common pagination parameters:
- page: Page number (default: 1)
- limit: Items per page (default: 10-50)

Common filter parameters:
- branch: Filter by branch name
- state: Filter by state
- role: Filter by user role
- status: Filter by status
- timeFilter: Dashboard time filter (last_24_hours, last_7_days, last_30_days, custom)
- startDate: Start date for custom range
- endDate: End date for custom range

=== ERROR HANDLING ===
- 401/403: Authentication errors - triggers logout
- 408/429/500-504: Retryable errors - automatic retry with exponential backoff
- Other errors: Logged and returned to caller

=== RESPONSE FORMAT ===
Most endpoints return:
{
  success: boolean,
  data: T,
  message: string
}

Some endpoints return direct data format (array or object) without wrapper.
